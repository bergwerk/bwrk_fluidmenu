{namespace bwrk=BERGWERK\BwrkFluidmenu\ViewHelpers}

<f:render section="{menuType}" arguments="{_all}" />

<f:section name="Default">
    <li class="{f:if(condition: page.hasSubpages, then: '{f:if(condition: \'{layer} > 0\', then: \'dropdown-submenu\', else: \'dropdown\')}')} item{page.uid} {bwrk:isActive(number: '{page.uid}', array: '{activePages}')}">
        <f:render partial="Menu/Item" arguments="{page: page, layer: layer, menuType:menuType, activePages: activePages}" />
    </li>
</f:section>

<f:section name="Mobile">
    <li class="{f:if(condition: page.hasSubpages, then: '{f:if(condition: \'{layer} > 0\', then: \'dropdown-submenu\', else: \'dropdown\')}')} item{page.uid}">
        <f:if condition="{page.hasSubpages}">
            <span class="icon icon-caret-down dropdown-toggle" data-toggle="dropdown"></span>
        </f:if>
        <f:render partial="Menu/Item" arguments="{page: page, layer: layer, menuType:menuType, activePages: activePages}" />
    </li>
</f:section>

<f:section name="Submenu">
    <li class="{f:if(condition: index.isFirst, then: 'first')}{f:if(condition: index.isLast, then: 'last')}">
        <f:render partial="Menu/Submenu/Item" arguments="{page: page, layer: layer, menuType:menuType, activePages: activePages, index:index}" />
    </li>
</f:section>